{# This page is built with nunjucks! #}

{% set title = 'Beach Cleanup Fans' %}
{% extends "layout.njk" %}

{% block body %}
  <main class="">
    <div class="min-h-screen flex items-center justify-center">
    <div class="card w-96 bg-base-300 shadow-xl">
      <div class="card-body">
        <h1 class="card-title items-center justify-center"><img src="/assets/cleanup.png" alt="Beach Cleanup"></h1>
        <p>Sign Up to support your favorite eco warrior</p>
        <form id="waitingListForm" class="bg-white p-8 rounded-xl shadow-md max-w-md mx-auto mt-20 space-y-6">
          <h1 class="text-2xl font-bold text-center text-primary-focus">Join the CleanupFans Waiting List</h1>
          <div class="form-group">
              <label for="email" class="block text-sm font-medium">Email</label>
              <input type="email" id="email" name="email" placeholder="Enter your email" class="input input-bordered w-full">
          </div>
          <div class="form-group">
              <label for="username" class="block text-sm font-medium">Username</label>
              <input type="text" id="username" name="username" placeholder="Choose a username" class="input input-bordered w-full">
          </div>
          <button type="submit" class="btn btn-primary w-full">Join Waiting List</button>
      </form>
      </div>
    </div>
  </div>

  <script>
document.getElementById("waitingListForm").addEventListener("submit", async (event) => {
    event.preventDefault();
    const email = document.getElementById("email").value;
    const username = document.getElementById("username").value;

    const response = await fetch("/helloworld", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ email, username })
    });

    const result = await response.json();
    if (result.success) {
        alert("Successfully joined the waiting list!");
    } else {
        alert("Error: " + result.message);
    }
});
</script>
  </main>
{% endblock %}



